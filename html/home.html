<!DOCTYPE html>
<html>
<head>
    <title>Home Page</title>
</head>
<body>
    <header>
        <nav>
            <ul>
                <li><a href="#">Home</a></li>
                <li><a href="settings.html">Settings</a></li>
            </ul>
        </nav>
        <!-- search bar-->
        <form action="search.php" method="get">
            <input type="text" name="search_query" placeholder="Search...">
            <button type="submit">Search</button>
        </form>
    </header>
    <main>
        <section>
            <h2>Recent</h2>
            <ul>
                <!-- recent posts -->
                <?php
                    // db
                    $servername = "localhost";
                    $username = "username";
                    $password = "password";
                    $dbname = "forum_db";

                    $conn = new mysqli($servername, $username, $password, $dbname);

                    if ($conn->connect_error) {
                        die("Connection failed: " . $conn->connect_error);
                    }

                    // find the most recent posts
                    $sql = "SELECT postID, username, profileImage, content, postImage, topic, likes, dislikes FROM post ORDER BY postID DESC LIMIT 10";
                    $result = $conn->query($sql);

                    if ($result->num_rows > 0) {

                        while($row = $result->fetch_assoc()) {
                            echo "<li>";
                            echo "<img src='data:image/jpeg;base64,".base64_encode($row['profileImage'])."' alt='Profile Image'>";
                            echo "<h3>".$row['topic']."</h3>";
                            echo "<p>".$row['content']."</p>";
                            echo "<a href='post.php?postID=".$row['postID']."'>Read More</a>";
                            echo "<div class='likes-dislikes'>";
                            echo "<span class='likes'>".$row['likes']." Likes</span>";
                            echo "<span class='dislikes'>".$row['dislikes']." Dislikes</span>";
                            echo "</div>";
                            echo "</li>";
                        }
                    } else {
                        echo "No recent posts";
                    }

                    $conn->close();
                ?>
            </ul>
        </section>
        <aside>
            <h2>Trending Topics</h2>
            <ul>
                <!-- trending -->
                <?php
                    // db
                    $servername = "localhost";
                    $username = "username";
                    $password = "password";
                    $dbname = "forum_db";

                    $conn = new mysqli($servername, $username, $password, $dbname);

                    if ($conn->connect_error) {
                        die("Connection failed: " . $conn->connect_error);
                    }

                    // find trends - most posts of a certain topic
                    $sql = "SELECT topic, COUNT(*) as count FROM post GROUP BY topic ORDER BY count DESC LIMIT 5";
                    $result = $conn->query($sql);

                    if ($result->num_rows > 0) {
                        while($row = $result->fetch_assoc()) {
                            echo "<li>";
                            echo "<a href=$result"</a>";
                            echo "</li>";
                        }
                    } else {
                        echo "No trending topics";
                    }

